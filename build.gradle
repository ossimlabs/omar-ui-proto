task copyClientResources(dependsOn: ':client:build') {
    group = 'build'
    description = 'Copy client resources into server'
}
copyClientResources.doFirst {
    copy {
        from "${project(':client').projectDir}/dist"
        into "${project(':omar-ui-proto').buildDir}/resources/main/public"
    }
}

task assembleServerAndClient(type: Copy, dependsOn: ['copyClientResources', ':omar-ui-proto:shadowJar', 'omar-ui-proto:assemble', 'echoThings']) {
    group = 'build'
    description = 'Build combined server & client JAR'
    from fileTree(dir: "${project(':omar-ui-proto').buildDir}/libs")
    into "${rootProject.buildDir}"
    doLast {
        logger.quiet "JAR/WAR generated at ${rootProject.buildDir}. It combines the server and client projects."
    }
}

task echoThings(type:Exec) {
    executable "sh"
    args "-c", "echo 'hello from your shell'"
}

//task(":omar-ui-proto:assemble").mustRunAfter(copyClientResources)
